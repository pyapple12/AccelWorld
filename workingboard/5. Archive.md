# 归档计划和任务总纲

> 当前版本: ver 0.41

本文档记录 AccelWorld 项目的已完成任务归档。

---

# 归档计划

# 归档错误

# 归档任务

## [AM01].[UI/UX 优化]：（滑杆实时调整 + 加速时间进度条，✅ 已完成）

### [AM01a].[滑杆实时调整加速倍率]

状态：✅ 已完成
优先级：高
需求描述：

- 滑动滑杆时，进度条和加速时间立即响应变化
- 无需点击"应用加速"按钮
- 输入框仅在用户手动输入后点击按钮才生效
  实现方案：
  - 修改 `on_slider_change` 方法，滑杆值变化时直接调用 `_update_acceleration_rate`
  - 添加 `valueChanged` 信号实时更新 UI

### [AM01b].[加速时间进度条]

状态：✅ 已完成
优先级：高
需求描述：

- 添加可视化进度条显示当前加速时间的进度
- 进度条宽度随时间动态变化
- 显示当前小时数/总小时数
  UI 设计：

```
[██████████████░░░░░░░░░░░░░░░] 16/48 小时
```

## [AM02].[天气功能]：（天气显示 + 天气图标，✅ 已完成）

### [AM02a].[天气显示]

状态：✅ 已完成
优先级：中
需求描述：

- 显示当前城市天气信息
- 支持手动设置城市
- 显示温度、湿度、天气状况
  技术方案：
  - 使用 Open-Meteo 免费天气 API（无需 API Key）
- 支持 17 个主要城市
  依赖：
  - 无需额外依赖，使用 urllib

### [AM02b].[天气图标]

状态：✅ 已完成
优先级：低
需求描述：

- 显示天气状况对应的图标
- 支持晴天、多云、阴天、雨天、雪天等
  实现方案：
  - 使用 Emoji 作为天气图标
  - 根据 WMO 天气代码映射

## [AM03].[界面美化]：（暗色主题 + 动画效果 + 自定义字体，✅ 已完成）

### [AM03a].[暗色主题]

状态：✅ 已完成
优先级：中
需求描述：

- 支持深色/浅色主题切换
- 适配系统主题设置
  实现方案：
  - 添加主题切换按钮（🌙/☀️）
  - 定义完整的深色/浅色 QSS 样式表

### [AM03b].[动画效果]

状态：✅ 已完成
优先级：低
需求描述：

- 时间更新时的渐变效果
- 进度条动画
  实现方案：
  - 进度条使用渐变色（qlineargradient）
  - 颜色从 #4CAF50 到 #81C784 再回到 #4CAF50

### [AM03c].[自定义字体]

状态：✅ 已完成
优先级：低
需求描述：

- 支持自定义字体设置
- 中英文字体优化
  实现方案：
  - 使用通用字体（Arial）
  - 优化各组件字体大小和权重

## [AM04].[功能增强]：（倒计时功能 + 多时区支持 + 世界时钟，✅ 已完成）

### [AM04a].[倒计时功能]

状态：✅ 已完成
优先级：中
需求描述：

- 添加目标时间倒计时
- 支持多个倒计时目标
- 倒计时结束时提醒
  实现方案：
  - 输入目标时间（支持多种格式）
  - 实时显示倒计时（X 天 HH:MM:SS）
  - 到期变红色提示

### [AM04b].[闹钟功能]：（多个闹钟 + 自定义铃声 + 通知提醒，✅ 已完成）

#### [AM04b01].[多闹钟支持]

状态：✅ 已完成
优先级：低
需求描述：

- 支持设置多个闹钟（最多 10 个）
- 闹钟列表显示所有已设置闹钟
- 每个闹钟独立开关控制
  实现方案：
  - 使用 AlarmManager 类管理所有闹钟
  - 闹钟列表使用 QListWidget 自定义 widget 显示
  - 每行显示：开关、时间、标签、重复设置、声音

#### [AM04b02].[自定义铃声]

状态：✅ 已完成
优先级：低
需求描述：

- 提供 4 种预设铃声（Classic、Gentle、Beep、Chime）
- 支持用户选择自定义音频文件
- 支持多种音频格式（.wav、.mp3、.ogg、.flac、.m4a、.wma、.aac）
  实现方案：
  - 预设铃声使用 winsound.Beep() 播放系统蜂鸣声
  - 自定义铃声使用 QMediaPlayer 播放

#### [AM04b03].[闹钟通知]

状态：✅ 已完成
优先级：低
需求描述：

- 闹钟触发时显示系统通知
- 一次性闹钟触发后自动禁用
- 重复闹钟按设置周期触发
  实现方案：
  - 使用 QSystemTrayIcon.showMessage() 显示通知
  - 与系统托盘集成
  - 检查分钟变化触发，避免重复提醒

### [AM04c].[多时区支持]

状态：✅ 已完成
优先级：低
需求描述：

- 显示多个时区的时间
- 方便跨时区用户使用
  实现方案：
  - 使用 pytz 库支持 100+ 时区
  - 下拉选择常用城市

### [AM04d].[世界时钟]

状态：✅ 已完成
优先级：低
需求描述：

- 预设世界主要城市时间
- 自定义添加城市
  实现方案：
  - 8 个预设城市（北京、东京、首尔、伦敦、巴黎、纽约、洛杉矶、悉尼）
  - 实时更新显示

## [AM05].[系统集成]：（系统托盘 + 系统通知 + 数据持久化 + 命令行增强，✅ 已完成）

### [AM05a].[系统托盘]

状态：✅ 已完成
优先级：中
需求描述：

- 支持最小化到系统托盘
- 托盘显示当前时间
- 托盘右键菜单
  实现方案：
  - 使用 QSystemTrayIcon
  - 右键菜单：显示/隐藏窗口、当前倍率、退出
  - 双击托盘显示窗口
  - 关闭按钮最小化到托盘

### [AM05b].[系统通知]

状态：✅ 已完成
优先级：低
需求描述：

- 支持系统通知推送
- 整点报时
- 自定义提醒通知
  实现方案：
  - 使用 QSystemTrayIcon.showMessage()
  - 隐藏到托盘时显示通知
  - 倒计时结束通知

### [AM05c].[数据持久化]

状态：✅ 已完成
优先级：中
需求描述：

- 保存用户设置
- 保存常用倍率
- 配置文件支持 (JSON/YAML)
  实现方案：
  - 配置文件：~/.config/accelworld/config.json
  - 保存：倍率、主题、城市、时区、倒计时、窗口位置
  - 启动时自动恢复上次设置

### [AM05d].[命令行增强]

状态：✅ 已完成
优先级：低
需求描述：

- 支持更多命令行参数
- 配置文件指定
- 静默模式运行
  实现方案：
  - --gui/--cli 模式选择
  - --rate/-R 加速倍率
  - --theme/-T 主题
  - --city/-C 默认城市
  - --hidden/--minimized 启动后隐藏
  - --version/-V 版本信息

---

## 版本规划

| 版本     | 主要特性                   | 状态      |
| -------- | -------------------------- | --------- |
| ver 0.11 | 初始版本 (PyQt6 迁移)      | ✅ 完成   |
| ver 0.12 | M01: 滑杆实时调整 + 进度条 | ✅ 完成   |
| ver 0.13 | M02: 天气显示              | ✅ 完成   |
| ver 0.20 | M03: 界面美化              | ✅ 完成   |
| ver 0.30 | M04: 功能增强              | ✅ 完成   |
| ver 0.40 | M05: 系统集成              | ✅ 完成   |
| ver 0.41 | M04b: 闹钟功能             | ✅ 完成   |
| ver 0.42 | M06: 代码质量修复          | ⏳ 待开发 |
| ver 0.43 | M07: 用户体验优化          | ⏳ 待开发 |
| ver 0.44 | M08: 架构优化              | ⏳ 待开发 |
| ver 0.45 | M09: 功能增强（建议项）    | ⏳ 待开发 |
| ver 1.0  | 完整功能版本               | ⏳ 待开发 |

## 更新日志

### 版本更新记录

[初始版本]

- 2026-01-07: 创建 MISSION.md，版本 ver 0.11

[M01 完成]

- 2026-01-07: 滑杆实时调整、加速时间进度条、按钮逻辑优化，版本 ver 0.12

[M02 完成]

- 2026-01-07: 天气显示、城市选择、天气图标，版本 ver 0.13

[M03 完成]

- 2026-01-07: 暗色/浅色主题切换、进度条动画效果、字体优化，版本 ver 0.20

[M04 完成 M04b 待开发]

- 2026-01-07: 倒计时功能、世界时钟（多时区支持），版本 ver 0.30

[M05 完成]

- 2026-01-07: 系统托盘、系统通知、数据持久化、命令行增强，版本 ver 0.40

[M04b 完成]

- 2026-01-10: 闹钟功能（支持多个闹钟、预设/自定义铃声、系统通知提醒），版本 ver 0.41
