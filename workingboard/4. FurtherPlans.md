# 路线图

> 当前版本: ver 0.40

本文档记录 AccelWorld 项目的未来规划路线图，分为短期、中期和长期目标。

---

## [F01].[短期目标]

### [F01a].[代码质量与错误修复]：（修复已知问题，改进代码质量）

#### [F01a01].[优化：修复天气模块重复键问题] → [P02a]

目标内容：修复 accelworld_weather.py 中 WEATHER_CODES 字典存在重复键的问题

规划：检查并合并重复的天气代码键值对，确保每个键唯一

#### [F01a02].[优化：增强异常处理机制] → [P03c]

目标内容：在关键函数中添加更完善的异常处理，避免程序崩溃

规划：为 API 调用、文件操作等添加 try-except 捕获，记录错误日志

#### [F01a03].[优化：添加基础日志功能] → [P03c]

目标内容：添加 logging 模块记录程序运行状态和错误

规划：使用 Python 标准 logging，设置合适的日志级别和输出格式

### [F01b].[用户体验优化]：（提升用户交互体验）

#### [F01b01].[优化：统一滑杆和输入框行为] → [P03a]

目标内容：解决滑杆拖动时输入框不同步的问题

规划：拖动滑杆时同步更新输入框值，提交时优先读取输入框

#### [F01b02].[优化：优化进度条动画效果]

目标内容：添加更流畅的进度条动画效果

规划：使用 QPropertyAnimation 实现平滑过渡动画

#### [F01b03].[优化：增强倒计时输入验证] → [P03b]

目标内容：提供更友好的倒计时格式提示和错误信息

规划：在输入框下方添加格式示例链接，支持日期选择器

### [F01c].[新增辅助功能]：（新增实用小功能）

#### [F01c01].[新增：应用启动参数验证] → [P02b]

目标内容：启动时验证命令行参数的有效性

规划：检查倍率范围、主题参数等，无效时给出友好提示

#### [F01c02].[新增：天气数据缓存机制] → [P05a]

目标内容：缓存天气数据，减少 API 调用频率

规划：本地缓存 30 分钟，避免频繁请求导致 API 限流

#### [F01c03].[新增：托盘图标实时更新] → [P05b]

目标内容：在托盘图标上显示当前时间或倍率信息

规划：使用 QSystemTrayIcon 的 setToolTip 实时更新信息

## [F02].[中期目标]

### [F02a].[功能扩展]：（新增核心功能）

#### [F02a01].[新增：添加快捷键支持] → [P05c]

目标内容：为 GUI 添加全局快捷键，如 Ctrl+S 保存设置、Ctrl+Q 退出等

规划：使用 QShortcut 实现快捷键绑定，提升用户体验

#### [F02a02].[新增：多语言界面支持] → [P05e]

目标内容：实现界面语言切换功能，支持中文、英文、日文

规划：使用硬编码多语言字典，支持运行时切换界面语言

#### [F02a03].[新增：闹铃功能] → [P05d]

目标内容：在倒计时基础上添加闹铃/提醒功能

规划：使用 QTimer 实现闹铃，支持自定义闹铃声音和时间

#### [F02a04].[新增：加速倍率预设方案] → [P05f]

目标内容：添加常用的加速倍率预设方案

规划：提供如"工作模式"、"睡眠模式"、"专注模式"等预设模板

### [F02b].[代码架构优化]：（改进代码结构）

#### [F02b01].[优化：添加单元测试] → [P04c]

目标内容：为核心计算逻辑添加 pytest 单元测试

规划：测试时间膨胀算法、日期转换等功能，确保计算准确性

#### [F02b02].[优化：完善类型注解] → [P04d]

目标内容：基于 basedpyright 为所有函数添加完整的类型注解

规划：逐步完善类型提示，消除类型检查警告，提升代码可维护性

#### [F02b03].[优化：重构 GUI 代码] → [P04a]

目标内容：将 GUI 界面布局代码分离到独立模块

规划：使用 Qt Designer 生成 UI 文件，使用 uic 加载

#### [F02b04].[优化：重构主题样式] → [P04b]

目标内容：将主题样式代码移到独立配置文件

规划：创建 themes.py 统一管理深色/浅色主题样式

## [F03].[长期目标]

### [F03a].[发布与分发]：（软件发布相关）

#### [F03a01].[修复：打包为可执行文件]

目标内容：使用 PyInstaller 或 Nuitka 打包为 Windows 可执行文件

规划：创建 spec 配置文件，支持单文件和目录打包，方便用户使用

#### [F03a02].[修复：创建安装程序]

目标内容：使用 NSIS 或 Inno Setup 创建 Windows 安装程序

规划：提供安装向导，支持自定义安装路径，创建桌面快捷方式

#### [F03a03].[修复：发布到 PyPI]

目标内容：将项目发布到 PyPI 供 pip 安装

规划：完善 pyproject.toml，编写 setup.py，添加版本管理

### [F03b].[文档与社区]：（文档和社区建设）

#### [F03b01].[修复：编写完整文档]

目标内容：创建详细的用户手册和开发者文档

规划：使用 MkDocs 或 Sphinx 生成文档网站，涵盖使用和开发指南

#### [F03b02].[修复：添加 CONTRIBUTING 指南]

目标内容：编写贡献指南，吸引社区参与

规划：规范代码风格、提交规范、PR 流程

### [F03c].[高级功能]：（高级功能开发）

#### [F03c01].[新增：支持自定义城市]

目标内容：允许用户手动添加不在预设列表中的城市天气

规划：支持用户输入城市名称和经纬度，调用 Open-Meteo API

#### [F03c02].[新增：数据统计与可视化]

目标内容：添加时间使用统计和可视化图表

规划：使用 Matplotlib 或 PyQtCharts 展示加速时间使用数据

#### [F03c03].[新增：主题商店]

目标内容：支持下载和切换用户贡献的主题

规划：提供在线主题下载或本地主题导入功能

#### [F03c04].[新增：云端配置同步]

目标内容：支持用户配置云端同步

规划：集成简单云存储，同步用户设置到云端

---

## 链接图示：

| 链接状态 | 问题编号 | 问题描述                      | 对应计划项            |
| :------: | :------: | ----------------------------- | --------------------- |
|    ✅    |  [P02a]  | 天气模块 WEATHER_CODES 重复键 | → [F01a01]            |
|    ✅    |  [P02b]  | 命令行参数缺少完整验证        | → [F01c01]            |
|    ✅    |  [P03a]  | 滑杆拖动时输入框不同步        | → [F01b01]            |
|    ✅    |  [P03b]  | 倒计时输入格式提示不足        | → [F01b03]            |
|    ✅    |  [P03c]  | 异常处理使用 print 而非日志   | → [F01a02] + [F01a03] |
|    ✅    |  [P04a]  | GUI 代码未使用 Qt Designer    | → [F02b03]            |
|    ✅    |  [P04b]  | 主题样式硬编码在 GUI 模块     | → [F02b04]            |
|    ✅    |  [P04c]  | 缺少单元测试                  | → [F02b01]            |
|    ✅    |  [P04d]  | 类型注解不完整                | → [F02b02]            |
|    ✅    |  [P05a]  | 建议：天气数据缓存机制        | → [F01c02]            |
|    ✅    |  [P05b]  | 建议：托盘图标实时更新        | → [F01c03]            |
|    ✅    |  [P05c]  | 建议：添加快捷键支持          | → [F02a01]            |
|    ✅    |  [P05d]  | 建议：闹铃功能                | → [F02a03]            |
|    ✅    |  [P05e]  | 建议：多语言界面支持          | → [F02a02]            |
|    ✅    |  [P05f]  | 建议：加速倍率预设方案        | → [F02a04]            |

> 说明：所有问题（P01-P05）均已链接到对应的计划项（[F01]-[F03]），其中 [P03c] 关联两个计划项。
